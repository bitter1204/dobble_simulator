# dobble_simulator
 Find a Projective plain for make Dobble board game

도블을 직접 만들어보기 위한 n차 사영평면 찾기 프로그램입니다. 
제작: 한마리곰 (hans@hangom.com)

* 설치 방법
파일 목록 오른쪽 위의 초록색 Code를 누른 뒤 Download ZIP을 눌러 개인 PC에 받아 압축을 푸세요.
또는 직접 git 명령어로 설치하셔도 됩니다. 
git clone https://github.com/hangom/dobble_simulator.git

* 실행방법
dobble.html을 실행하신 뒤 원하는 숫자 n을 입력하시면 해당하는 사영평면으로 만들 수 있는 도블 샘플이 나옵니다. 

* 생성 방식 및 가능 범위
이 프로그램에서 사영평면을 계산하는 방식은 2가지입니다. 
 (1) Latin Square를 사용하는 방식
  가장 정석적인 방식으로, 다음과 같은 성질의 n*n Latin Square n-1개를 만든 뒤 그것을 사영평면 행렬로 바꿉니다. 
   1. 각 배열의 가로줄에는 각각 1, 2, 3, ... , n이 한 번씩 들어간다.
   2. 각 배열의 세로줄에는 각각 1, 2, 3, ... , n이 한 번씩 들어간다. 
   3. 배열 모두에 대해 임의의 두 행을 선택했을 때 그 두 행의 값이 같은 행이 존재하지 않는다.
   4. 배열 모두에 대해 임의의 두 행을 선택하고, 그것을 a, b 라고 했을 때, a와 b에서 임의의 두 열을 선택했을 때 그 두 열의 값이 같은 열이 존재하지 않는다.
   5. 배열 모두에 대해 임의의 두 열에 대해 행별로 살펴봤을 때 1, 2, 3, ... , n로 조합할 수 있는 모든 조합이 존재한다. 
   
   Latin Square 배열을 만들 수 있다면 그것으로 Finate Projective Plane을 만들 수 있습니다.
   그 방법에 대해서는 아래 문서들을 참고했습니다.
   https://purl.pt/2228
   https://www.sciencedirect.com/science/article/pii/0012365X9190280F
  
   하지만, 여기에 짜놓은 알고리즘으로는 O(n^n³)이라는 어마어마한 복잡도를 가지기 때문에 n이 7 이상이 되면 실행이 불가능해집니다.
   운 좋게도 n=8일 때는 결과가 빠르게 나왔지만, n=9일 때는 일주일을 돌려도 전체 연산의 1/1000도 돌지 않았습니다.
   여기에는 n=8, n=9일 때의 배열을 직접 입력해놓은 것이 있으니 n=8, n=9일 때는 이 함수를 사용하지 않고 직접 배열을 사용합니다.
   n=9일 때의 배열은 아래의 아티클을 참고했다. 
   https://www.ams.org/journals/mcom/1959-13-068/S0025-5718-1959-0107208-8/S0025-5718-1959-0107208-8.pdf
 
 (2) Number Shift를 사용하는 방식
  사영평면에 들어가는 점을 0, 1, 2, ... , n²+n+1 이라고 할 때, 예를 들어 n=5 일 경우 첫 n+1개의 직선은 다음과 같이 표현합니다. 

    0	1	2	3	4	5
    0	6	7	8	9	10
    0	11	12	13	14	15
    0	16	17	18	19	20
    0	21	22	23	24	25
    0	26	27	28	29	30

  0이 들어가는 모든 세트를 표현한 것인데, 나머지 숫자들을 가로로 정렬해놓은 것을 볼 수 있습니다. 
  다음은 1~5가 들어가는 세트를 각각 n개씩 만드는데요, 1의 경우 6~30을 세로로 정렬해서 생성합니다. 

    1	6	11	16	21	26
    1	7	12	17	22	27
    1	8	13	18	23	28
    1	9	14	19	24	29
    1	10	15	20	25	30

  2의 경우 1에서 사용한 숫자들을 2가 있는 열을 제외한 첫 열은 0칸, 둘째 열은 1칸, 셋째 열은 2칸... 다섯째 열은 4칸씩 위로 움직입니다. 

    2	6	12	18	24	30
    2	7	13	19	25	26
    2	8	14	20	21	27
    2	9	15	16	22	28
    2	10	11	17	23	29

  3, 4, 5 역시 그 이전 단계의 세트에서 첫 열은 0칸, 둘째 열은 1칸, 셋째 열은 2칸... 다섯째 열은 4칸씩 위로 움직입니다. 

    3	6	13	20	22	29
    3	7	14	16	23	30
    3	8	15	17	24	26
    3	9	11	18	25	27
    3	10	12	19	21	28

    4	6	14	17	25	28
    4	7	15	18	21	29
    4	8	11	19	22	30
    4	9	12	20	23	26
    4	10	13	16	24	27

    5	6	15	19	23	27
    5	7	11	20	24	28
    5	8	12	16	25	29
    5	9	13	17	21	30
    5	10	14	18	22	26

  이 방식으로 사영평면을 얻을 수 있습니다만, 이 방식은 소수에서는 제대로 작동하지만, 소수가 아닌 경우에는 잘못된 결과를 만들어냅니다. 

=> 이와 같은 방식으로 이 프로그램에서는 n < 12에서의 모든 사영평면 계산이 가능하고(n=6, n=10일 경우에는 사영평면이 성립하지 않는 것으로 알려져 있습니다.),
   그 이후에서는 소수에 대해서만 계산이 가능합니다. 물론 숫자가 커질 수록 계산 시간도 늘어납니다. 